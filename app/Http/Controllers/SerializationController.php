<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Route;

class SerializationController extends Controller
{
    /**
     * フォーム画面
     */
    public function index()
    {
        return view(Route::currentRouteName());
    }

    /**
     * 確認画面
     */
    public function confirm(Request $request)
    {
        return view(Route::currentRouteName(),[
            'array' => $request->input('array')
        ]);
    }

    /**
     * 保存処理
     */
    public function store(Request $request)
    {
        // デシリアライズ
        $storeParams = unserialize($request->input('serialized_data'));
        $this->storeData($storeParams);

        return redirect()->route('serialization.complete');
    }

    /**
     * 完了画面
     */
    public function complete()
    {
        return view(Route::currentRouteName());
    }

    private function storeData(array $storeParams)
    {
        //保存する（脆弱性の検証には不要なため処理は記述しない）
    }
}
